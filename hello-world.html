<!DOCTYPE html>
<html lang="en-us">

	<head>
			
		<meta charset="utf-8">
		<title>Area Selection</title>
	
	</head>

	<body>
		
		<input type="button" value="TOGGLE" onclick="enableAreaSelection()">
		<div hidden id="selection" style="background-color:#dddddd; position:absolute"></div>
		<img hidden id="imgReady" style="position:absolute" src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQI8euqYJCLfs-sx2ohExKrwDYQu7mYeiWljzIxPWeZZmLy23nK"/>
		<script>
		
			var enabled = false; //flag value
    
	    function enableAreaSelection() {
	      enabled = enabled ? false : true;
	    }
	    
			var box = document.getElementById('selection'), x1 = 0, y1 = 0, x2 = 0, y2 = 0;
	    function setBox() { //Resize the box
        var x3 = Math.min(x1,x2);
        var x4 = Math.max(x1,x2);
        var y3 = Math.min(y1,y2);
        var y4 = Math.max(y1,y2);
        box.style.left = x3 + 'px';
        box.style.top = y3 + 'px';
        box.style.width = x4 - x3 + 'px';
        box.style.height = y4 - y3 + 'px';
	    }
    
      onmousedown = function(e) {
      	if(enabled) {
	        box.hidden = 0;
	        x1 = e.clientX;
	        y1 = e.clientY;
	        setBox();
      	}
      };
      onmousemove = function(e) {
      	if(enabled) {
	        x2 = e.clientX;
	        y2 = e.clientY;
	        setBox();
      	}
      };
      onmouseup = function(e) {
        if(enabled) {
        	box.hidden = 1;
        	var img_area = document.getElementById('imgReady');
        	img_area.style.left = box.style.left;
        	img_area.style.top = box.style.top;
        	img_area.style.width = box.style.width;
        	img_area.style.height = box.style.height;
        	img_area.hidden = 0;
        	enabled = false;
        }
      };
    
		</script>
	</body>

</html>
